model Practica {
  id Int @default(autoincrement())

  nombre                 String
  posicionRelativa       Int
  competenciasRequeridas Json

  // referencia a

  idPlan          Int
  planRelacionado Plan @relation(name: "define las practicas", fields: [idPlan], references: [id])

  idAsignatura          Int
  asignaturaContemplada PlanContemplaAsignatura @relation(name: "practica referenciada", fields: [idPlan, idAsignatura], references: [idPlan, idAsignatura])

  // es referenciado por

  PracticaTomada PracticaTomada[] @relation(name: "practica asociada")

  //

  @@id([id, idPlan, idAsignatura])
  @@unique([idPlan, idAsignatura])
}

model PracticaTomada {
  fechaInicio          DateTime
  fechaTermino         DateTime
  resultadoDiagnostico Json
  resultado            String

  // referencia a

  rutEstudiante      String
  EstudianteAsociado Estudiante @relation(name: "tomo las practicas", fields: [rutEstudiante], references: [rut])

  idPractica       Int
  idPlan           Int
  idAsignatura     Int
  PracticaAsociada Practica @relation(name: "practica asociada", fields: [idPractica, idPlan, idAsignatura], references: [id, idPlan, idAsignatura])

  idConvenio       Int
  ConvenioAsociado Convenio @relation(name: "convenio asociado", fields: [idConvenio], references: [id])

  //

  @@id([idPractica, idPlan, idAsignatura, rutEstudiante, idConvenio])
}

enum MODALIDAD {
  COLEGIO_REGULAR_PIE
  NO_CONVENCIONAL // preguntar por especificaciones
  ESCUELA_ESPECIAL
  COLEGIO_ESPECIAL // preguntar por la diferencia
  ESCUELA_DE_LENGUAJE
}

model Convenio {
  id Int @id @default(autoincrement())

  modalidad           MODALIDAD
  titulo         String @unique
  centroPractica String

  fechaInicioConvenio DateTime @db.Date
  fechaFinConvenio    DateTime @db.Date
  validez             Boolean

  documentoConvenio String
  urlFoto           String

  // es referenciado por

  PracticaTomada PracticaTomada[] @relation(name: "convenio asociado")
}
